"use strict";(self.webpackChunkmy_react_components=self.webpackChunkmy_react_components||[]).push([[74],{9074:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(4165),o=n(3433),r=n(5861),l=n(9439),c=n(2791),s=n(8182),i=n(8051),u=n(5130),d=n(184);function m(e){e.text;var t=e.staus;(0,s.Z)("Not Intersted"===t&&"bg-red-300","Important"===t&&"bg-green-300","Normal"===t&&"bg-orange-300");return"Important"===t?(0,d.jsx)(i.Z,{color:"success"}):"Not Intersted"===t?(0,d.jsx)(u.Z,{color:"error"}):""}var h=n(5919),x=n(4942),g=n(1413),p=n(1243),f=n(3786),Z=n(5574),j=n(5661),y=n(4554),b=n(6151),C=n(68),v=n(3400),w=n(7123),_=n(9157),T=n(1582),V=n(8820),k=n(5397),N=(n(8161),n(8096)),S=n(4613),A=n(8406);function K(e){var t=e.lable,n=e.keyValue,a=e.values,o=e.setValues,r=e.choisesArray;return(0,d.jsxs)(N.Z,{children:[(0,d.jsx)(S.Z,{id:"demo-select-small-label",children:t}),(0,d.jsx)(A.Z,{lable:t,value:a[n]||"",onChange:function(e){console.log(e.target.name),o((0,g.Z)((0,g.Z)({},a),{},(0,x.Z)({},e.target.name,e.target.value)))},inputProps:{name:n},children:r.map((function(e){return(0,d.jsx)(f.Z,{value:e[n],children:e[n]},e[n])}))})]})}var E=n(4750),z=n(1652),I=n(4544),R=n(7892),D=n.n(R),F=n(9145),P=n(4277);function M(e){var t=e.row,n=e.open,a=e.onClose,r=e.contactType,s=e.contactResult,i=(0,c.useState)(!0),u=(0,l.Z)(i,2),m=u[0],x=u[1],g=(0,c.useState)(!1),_=(0,l.Z)(g,2),T=_[0],N=_[1],S=(0,c.useState)([]),A=(0,l.Z)(S,2),K=A[0],E=A[1],z=(0,P.v9)((function(e){return e.user.access}));(0,c.useEffect)((function(){p.Z.get(t.original.contact_url).then((function(e){E(e.data.results),x(!1)})).catch((function(e){console.log(e),x(!1)}))}),[K]);var I=(0,c.useMemo)((function(){return[{accessorKey:"typ",header:"contact_type",muiTableBodyCellEditTextFieldProps:{select:!0,children:r.map((function(e){return(0,d.jsx)(f.Z,{defaultValue:"",value:e.contact_type,children:e.contact_type},e.contact_type)}))}},{accessorKey:"date",header:"date",filterFn:"lessThanOrEqualTo",sortingFn:"datetime"},{accessorKey:"result",header:"Result",muiTableBodyCellEditTextFieldProps:{select:!0,children:s.map((function(e){return(0,d.jsx)(f.Z,{defaultValue:"",value:e.contact_result,children:e.contact_result},e.contact_result)}))}}]}),[]),R=(0,c.useCallback)((function(e){window.confirm("Are you sure you want to delete ".concat(e.getValue("date")," contact")),console.log(e.original.contact_url),p.Z.delete(e.original.contact_url,{headers:{Authorization:"JWT ".concat(z)}}).then((function(e){console.log(e)})).catch((function(e){return console.log(e.response.data)})),K.splice(e.index,1),E((0,o.Z)(K))}),[K]);return t&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"md",sx:{p:1,width:"1500px",height:"100%"},open:n,onClose:a,children:[(0,d.jsxs)(j.Z,{className:"text-blue-900 font-extrabold  ",textAlign:"center",children:[(0,d.jsx)("p",{className:"  inline text-black ",children:"Contact History of"})," ",t.original.name]}),(0,d.jsxs)(y.Z,{className:"p-5",children:[(0,d.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-10 p-1 mb-1",children:[(0,d.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2",children:[(0,d.jsx)("p",{children:"Phone Number : "}),(0,d.jsx)("p",{children:t.original.phone+" "}),(0,d.jsx)("a",{href:"tel:".concat(t.original.phone),children:(0,d.jsx)(F.Z,{fontSize:"small",color:"success"})})]}),(0,d.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2",children:[(0,d.jsx)("p",{children:"Email : "}),(0,d.jsxs)("p",{id:"email",children:[t.original.email," "]}),(0,d.jsx)(b.Z,{onClick:function(){navigator.clipboard.writeText(document.getElementById("email").textContent)},children:"Copy Email"}),null===t.original.website||"nan"===t.original.website||""===t.original.website||" "===t.original.website?"":(0,d.jsx)(b.Z,{href:"".concat(t.original.website),target:"_blank",className:"text-blue-500 text-bold",children:"Go To Website"})]})]}),(0,d.jsx)(h.ZP,{columns:I||[],data:K,state:{isLoading:m},enablePagination:!1,enableGlobalFilter:!1,enableDensityToggle:!1,enableGlobalFilterRankedResults:!1,enableEditing:!0,enableD:!0,onEditingRowSave:function(e){var t=e.exitEditingMode,n=e.row,a=e.values;a.contact_url=n.original.contact_url,K[n.index]=a,E((0,o.Z)(K));var r=n.original.contact_url,l={contact_type:a.typ,date:a.date,contact_result:a.result};console.log(l),p.Z.put(r,l,{headers:{Authorization:"JWT ".concat(z)}}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),t()},onEditingRowCancel:function(){console.log("canceld")},renderRowActions:function(e){var t=e.row,n=e.table;return(0,d.jsxs)(y.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,d.jsx)(C.Z,{arrow:!0,placement:"left",title:"Edit",children:(0,d.jsx)(v.Z,{onClick:function(){return n.setEditingRow(t)},children:(0,d.jsx)(V.Z,{})})}),(0,d.jsx)(C.Z,{arrow:!0,placement:"right",title:"Delete",children:(0,d.jsx)(v.Z,{color:"error",onClick:function(){return R(t)},children:(0,d.jsx)(k.Z,{})})})]})},renderTopToolbarCustomActions:function(){return(0,d.jsx)(b.Z,{color:"secondary",onClick:function(){return N(!0)},variant:"contained",children:"Add New Contact"})}}),(0,d.jsx)(W,{company_row:t,columns:I,open:T,onClose:function(){return N(!1)},onSubmit:function(e){console.log(e),K.push(e),E((0,o.Z)(K)),console.log(t)},contactType:r,contactResult:s})]}),(0,d.jsx)(w.Z,{sx:{p:"1.25rem"},children:(0,d.jsx)(b.Z,{onClick:a,children:"Close"})})]})})}var W=function(e){var t=e.open,n=e.columns,a=e.onClose,o=e.onSubmit,r=e.company_row,s=e.contactType,i=e.contactResult,u=(0,P.v9)((function(e){return e.user.access})),m=(0,c.useState)((function(){return n.reduce((function(e,t){var n;return e[null!==(n=t.accessorKey)&&void 0!==n?n:""]="",e}),{})})),h=(0,l.Z)(m,2),f=h[0],y=h[1];return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(Z.Z,{open:t,children:[(0,d.jsx)(j.Z,{textAlign:"center",children:"Create New Account"}),(0,d.jsx)(_.Z,{children:(0,d.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:(0,d.jsxs)(T.Z,{sx:{width:"100%",minWidth:{xs:"300px",sm:"360px",md:"400px"},gap:"1.5rem"},children:[(0,d.jsx)(K,{lable:"Contact Type",keyValue:"contact_type",choisesArray:s,values:f,setValues:y}),(0,d.jsx)(z._,{dateAdapter:E.y,children:(0,d.jsx)(I.M,{defaultValue:D()(),label:"Date",onChange:function(e){console.log(D()().format("YYYY-MM-DD")),y((0,g.Z)((0,g.Z)({},f),{},(0,x.Z)({},"date","".concat(e.$y,"-").concat(e.$M+1,"-").concat(e.$D))))}})}),(0,d.jsx)(K,{lable:"Contact Result",keyValue:"contact_result",choisesArray:i,values:f,setValues:y})]})})}),(0,d.jsxs)(w.Z,{sx:{p:"1.25rem"},children:[(0,d.jsx)(b.Z,{onClick:a,children:"Cancel"}),(0,d.jsx)(b.Z,{color:"secondary",onClick:function(){console.log(f),""===f.date&&(f.date=D()().format("YYYY-MM-DD"));var e="company/"+r.original.id,t={contact_type:f.contact_type,date:f.date,contact_result:f.contact_result};p.Z.post("http://localhost:8000/api/companies/"+e,t,{headers:{Authorization:"JWT ".concat(u)}}).catch((function(e){return console.log(e.response.data)})),console.log(t),f.typ=f.contact_type,f.result=f.contact_result,o(f),a()},variant:"contained",children:"Create New Account"})]})]})})},O=n(6788),Y=n(7391),J=n(9644);function B(e){var t=e.options,n=e.setValues,a=e.values;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(J.Z,{getOptionLabel:function(e){return e.name},onChange:function(e,t){n((0,g.Z)((0,g.Z)({},a),{},(0,x.Z)({},"country",t.name))),console.log(t)},disablePortal:!0,className:"",options:t,renderInput:function(e){return(0,d.jsx)(Y.Z,(0,g.Z)({label:"Country"},e))},renderOption:function(e,t){return(0,d.jsx)(y.Z,(0,g.Z)((0,g.Z)({component:"li"},e),{},{children:t.name}))}})})}var G=function(e){var t=e.open,n=e.columns,a=e.onClose,o=e.onSubmit,r=e.states,s=(0,P.v9)((function(e){return e.user.access})),i=(0,c.useState)((function(){return n.reduce((function(e,t){var n;return e[null!==(n=t.accessorKey)&&void 0!==n?n:""]="",e}),{})})),u=(0,l.Z)(i,2),m=u[0],h=u[1],y=(0,c.useState)(""),C=(0,l.Z)(y,2),v=C[0],V=C[1];return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(Z.Z,{open:t,children:[(0,d.jsx)(j.Z,{textAlign:"center",children:"Create New Account"}),(0,d.jsx)(_.Z,{children:(0,d.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:(0,d.jsxs)(T.Z,{sx:{width:"100%",minWidth:{xs:"300px",sm:"360px",md:"400px"},gap:"1.5rem",padding:"10px"},children:[(0,d.jsxs)("h3",{className:"text-red-500",children:[" ","".concat(JSON.stringify(v))]}),(0,d.jsx)(Y.Z,{label:n[0].header,name:n[0].accessorKey,onChange:function(e){return h((0,g.Z)((0,g.Z)({},m),{},(0,x.Z)({},e.target.name,e.target.value)))}},n[0].accessorKey),(0,d.jsx)(B,{options:r,setValues:h,values:m}),(0,d.jsxs)(N.Z,{children:[(0,d.jsx)(S.Z,{id:"demo-select-small-label",children:"Status"}),(0,d.jsx)(A.Z,{labelId:"demo-select-small-label",id:"demo-simple-select",lable:"status",value:m.status,onChange:function(e){console.log(e.target.name,e.target.value),h((0,g.Z)((0,g.Z)({},m),{},(0,x.Z)({},e.target.name,e.target.value)))},inputProps:{name:n[2].accessorKey},children:["Important","Not Intersted","Normal"].map((function(e){return(0,d.jsx)(f.Z,{value:e,children:e},e)}))})]}),(0,d.jsx)(Y.Z,{label:n[5].header,name:n[5].accessorKey,onChange:function(e){return h((0,g.Z)((0,g.Z)({},m),{},(0,x.Z)({},e.target.name,e.target.value)))}},n[5].accessorKey),(0,d.jsx)(Y.Z,{label:n[3].header,name:n[3].accessorKey,onChange:function(e){return h((0,g.Z)((0,g.Z)({},m),{},(0,x.Z)({},e.target.name,e.target.value)))}},n[3].accessorKey),(0,d.jsx)(Y.Z,{label:n[4].header,name:n[4].accessorKey,onChange:function(e){return h((0,g.Z)((0,g.Z)({},m),{},(0,x.Z)({},e.target.name,e.target.value)))}},n[4].accessorKey),(0,d.jsx)(Y.Z,{label:n[6].header,name:n[6].accessorKey,onChange:function(e){return h((0,g.Z)((0,g.Z)({},m),{},(0,x.Z)({},e.target.name,e.target.value)))}},n[6].accessorKey)]})})}),(0,d.jsxs)(w.Z,{sx:{p:"1.25rem"},children:[(0,d.jsx)(b.Z,{onClick:a,children:"Cancel"}),(0,d.jsx)(b.Z,{color:"secondary",onClick:function(){console.log(m);var e=Object.assign({},m);delete e.country_name,e.status="Important"==e.status||"Not Intersted"!=e.status&&null,console.log(e),p.Z.post("http://127.0.0.1:8000/api/companies/",e,{headers:{Authorization:"JWT ".concat(s)}}).then((function(e){console.log(e),a()})).catch((function(e){console.log(e.response.data),V(e.response.data)})),V(""),m.country_name=m.country,m.status=e.status,o(m)},variant:"contained",children:"Create New Account"})]})]})})};function H(e){var t=e.tableData,n=e.setTableData,s=e.states,i=e.contactType,u=e.contactResult,x=(0,c.useState)(!0),g=(0,l.Z)(x,2),Z=(g[0],g[1],(0,c.useState)(!1)),j=(0,l.Z)(Z,2),w=j[0],_=j[1],T=(0,c.useState)(!1),N=(0,l.Z)(T,2),S=N[0],A=N[1],K=(0,c.useState)(),E=(0,l.Z)(K,2),z=E[0],I=E[1],R=(0,P.v9)((function(e){return e.user.access})),D=(0,c.useState)({}),W=(0,l.Z)(D,2),Y=W[0],J=W[1],B=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(r){var l,c,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=r.exitEditingMode,c=r.row,s=r.values,Object.keys(Y).length||((i=Object.assign({},s)).country=i.country_name,delete i.country_name,i.status="Important"==i.status||"Not Intersted"!=i.status&&null,p.Z.put(c.original.company_url,i,{headers:{Authorization:"JWT ".concat(R)}}).then((function(e){console.log(e)})).catch((function(e){var t=e.response.data;alert(Object.entries(t))})),s.company_url=c.original.company_url,s.contact_url=c.original.contact_url,s.status=i.status,t[c.index]=s,n((0,o.Z)(t)),l());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=(0,c.useCallback)((function(e){window.confirm("Are you sure you want to delete ".concat(e.getValue("name")))&&(console.log(e.original),p.Z.delete(e.original.company_url,{headers:{Authorization:"JWT ".concat(R)}}).then((function(e){console.log(e)})),t.splice(e.index,1),n((0,o.Z)(t)))}),[t]),$=(0,c.useMemo)((function(){return[{accessorKey:"name",header:"Company Name",size:30,enableClickToCopy:!0},{accessorKey:"country_name",header:"Country",size:10,muiTableBodyCellEditTextFieldProps:{select:!0,children:s.map((function(e){return(0,d.jsx)(f.Z,{value:e.name,children:e.name},e.name)}))}},{accessorKey:"status",accessorFn:function(e){return!0===e.status?"Important":!1===e.status?"Not Intersted":"Normal"},header:"Status",size:3,Cell:function(e){var t=e.cell;e.column;return(0,d.jsx)(m,{text:t.getValue(),staus:t.getValue()})},muiTableBodyCellEditTextFieldProps:function(e){e.cell,e.column,e.row,e.table;return{select:!0,children:["Important","Not Intersted","Normal"].map((function(e){return(0,d.jsx)(f.Z,{value:e,children:e},e)}))}}},{accessorKey:"manager",header:"Manager",size:10,Cell:function(e){var t=e.cell;e.column;return null===t.getValue()||"nan"===t.getValue()||""===t.getValue()||" "===t.getValue()?"":t.getValue()}},{accessorKey:"phone",header:"Phone",size:30,enableClickToCopy:!0,Cell:function(e){var t=e.cell;e.column;return null===t.getValue()||"nan"===t.getValue()||""===t.getValue()||" "===t.getValue()?"":(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:t.getValue()}),(0,d.jsx)("a",{href:"tel:".concat(t.getValue()),className:"hover:shadow-lg hover:shadow-blue-500",children:(0,d.jsx)(F.Z,{fontSize:"small",color:"success"})})]})}},{accessorKey:"email",header:"Email",size:10,enableClickToCopy:!0,Cell:function(e){var t=e.cell;e.column;return null===t.getValue()||"nan"===t.getValue()||""===t.getValue()||" "===t.getValue()?"":(0,d.jsx)("p",{className:"text-blue-500 text-bold shadow-blue-300",children:" Copy "})}},{accessorKey:"website",header:"Website",size:10,enableClickToCopy:!0,Cell:function(e){var t=e.cell;e.column;return null===t.getValue()||"nan"===t.getValue()||""===t.getValue()||" "===t.getValue()?"":(0,d.jsxs)("a",{href:"".concat(t.getValue()),target:"_blank",className:"text-blue-500 text-bold",children:[" ","Click"," "]})}}]}),[s]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.ZP,{editingMode:"modal",displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"},size:40}},columns:$||[],data:t||[],enableColumnOrdering:!0,enableEditing:!0,onEditingRowSave:B,onEditingRowCancel:function(){J({})},renderRowActions:function(e){var t=e.row,n=e.table;return(0,d.jsxs)(y.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,d.jsx)(C.Z,{arrow:!0,placement:"left",title:"Edit",children:(0,d.jsx)(v.Z,{onClick:function(){return n.setEditingRow(t)},children:(0,d.jsx)(V.Z,{fontSize:"small"})})}),(0,d.jsx)(C.Z,{arrow:!0,placement:"right",title:"Delete",children:(0,d.jsx)(v.Z,{color:"error",onClick:function(){return H(t)},children:(0,d.jsx)(k.Z,{fontSize:"small"})})}),(0,d.jsx)(C.Z,{arrow:!0,placement:"right",title:"Contact History",children:(0,d.jsx)(v.Z,{color:"secondary",onClick:function(){return function(e){I(e),A(!0),console.log(e),console.log(z)}(t)},children:(0,d.jsx)(O.Z,{fontSize:"small"})})})]})},renderTopToolbarCustomActions:function(){return(0,d.jsx)(b.Z,{color:"secondary",onClick:function(){return _(!0)},variant:"contained",children:"Create New Account"})}}),S&&(0,d.jsx)(M,{contactType:i,contactResult:u,row:z,open:S,onClose:function(){return A(!1)}}),(0,d.jsx)(G,{columns:$,open:w,onClose:function(){return _(!1)},onSubmit:function(e){t.push(e),n((0,o.Z)(t))},states:s})]})}}}]);
//# sourceMappingURL=74.33dafac8.chunk.js.map