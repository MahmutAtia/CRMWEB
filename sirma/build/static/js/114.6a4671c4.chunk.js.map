{"version":3,"file":"static/js/114.6a4671c4.chunk.js","mappings":"iRAUMA,EAAQC,EAAAA,MAAW,kBAAM,oDAA+B,IAE/C,SAASC,IACtB,IAAAC,GAAiCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAtCI,EAASF,EAAA,GAAEG,EAAWH,EAAA,GAC7BI,GAAkCL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAvCE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,GAAwCT,EAAAA,EAAAA,UAAS,IAAGU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAA7CE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GACpCG,GAA4Cb,EAAAA,EAAAA,UAAS,IAAGc,GAAAZ,EAAAA,EAAAA,GAAAW,EAAA,GAAjDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GAExCG,GAAkCjB,EAAAA,EAAAA,WAAS,GAAKkB,GAAAhB,EAAAA,EAAAA,GAAAe,EAAA,GAAzCE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAGxBG,GAAMC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,KAAKC,MAAM,IAuDpD,OArDAC,EAAAA,EAAAA,YAAU,WAKRC,EAAAA,EAAAA,IAFY,uCAGA,CAAEC,QAAS,CAAEC,cAAc,OAADC,OAAST,MAC5CU,MAAK,SAACC,GACL5B,EAAY4B,EAAIC,KAAKC,SAAW,GAClC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAMFT,EAAAA,EAAAA,IAFkB,qDAGA,CAAEC,QAAS,CAAEC,cAAc,OAADC,OAAST,MAClDU,MAAK,SAACC,GACLhB,EAAkBgB,EAAIC,KAAKC,SAAW,GACxC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAIFT,EAAAA,EAAAA,IAFmB,8CAGA,CAAEC,QAAS,CAAEC,cAAc,OAADC,OAAST,MACnDU,MAAK,SAACC,GACLxB,EAAawB,EAAIC,KAAKC,SAAW,GACnC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAIFT,EAAAA,EAAAA,IAFmB,mDAGA,CAAEC,QAAS,CAAEC,cAAc,OAADC,OAAST,MACnDU,MAAK,SAACC,GACLpB,EAAgBoB,EAAIC,KAAKC,SAAW,GACtC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAGFhB,GAAa,EACf,GAAG,KAGDmB,EAAAA,EAAAA,KAACC,EAAAA,SAAQ,CACPC,UACEF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,qEAAoEC,UACjFJ,EAAAA,EAAAA,KAAA,OACEG,UAAU,mDACVE,IAAI,0EAGTD,UAEJJ,EAAAA,EAAAA,KAAC3C,EAAK,CACDiD,UAAW1C,EACX2C,aAAc1C,EACd2C,OAAQxC,EACRyC,YAAarC,EACbsC,cAAelC,EACfI,UAAWA,KAInB,C","sources":["pages/home.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link, Navigate, useLoaderData } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useState } from \"react\";\r\nimport useFetchAxios from \"../hoocs/useFetchAxios\";\r\n\r\n// importing lazy components\r\nimport { Suspense, lazy } from \"react\";\r\n\r\nconst Table = React.lazy(() => import(\"../components/myTable\"));\r\n\r\nexport default function Home() {\r\n  const [companies, setCompaies] = useState([]);\r\n  const [countries, setCountries] = useState([]);\r\n  const [contactTypes, setContactTypes] = useState([]);\r\n  const [contactResults, setContactResults] = useState([]);\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  //redux\r\n  const jwt = useSelector((state) => state.user.access); // it wiil be a problem if jwt access is expired\r\n\r\n  useEffect(() => {\r\n    // get all companies\r\n\r\n    const url = \"http://127.0.0.1:8000/api/companies/\";\r\n\r\n    axios\r\n      .get(url, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setCompaies(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    // get all companies\r\n\r\n    const resultUrl = \"http://127.0.0.1:8000/api/companies/\" + \"contact_result\";\r\n\r\n    axios\r\n      .get(resultUrl, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setContactResults(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    const urlCountry = \"http://127.0.0.1:8000/api/companies/\" + \"country\";\r\n\r\n    axios\r\n      .get(urlCountry, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setCountries(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    const contactUrl = \"http://127.0.0.1:8000/api/companies/\" + \"contact_type\";\r\n\r\n    axios\r\n      .get(contactUrl, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setContactTypes(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    // loading\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\" w-[100%] h-[700px] flex flex-column justify-center  items-center \">\r\n          <img\r\n            className=\"  w-[50%] m-auto  p-20 shadow-sm shadow-blue-100\"\r\n            src=\"https://www.sirmametal.com/wp-content/uploads/2019/12/sirmalogo.png\"\r\n          />\r\n        </div>\r\n      }\r\n    > \r\n   <Table\r\n        tableData={companies}\r\n        setTableData={setCompaies}\r\n        states={countries}\r\n        contactType={contactTypes}\r\n        contactResult={contactResults}\r\n        isLoading={isLoading}\r\n      />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\n// export const companyLouder = async ()=>{\r\n\r\n//   // get all companies\r\n//   try {\r\n//     const url = \"http://127.0.0.1:8000/api/companies/\";\r\n//     const res = await axios.get(url, {headers: {Authorization: `JWT ${jwt}`}}) // it wiil be a problem if jwt access is expired\r\n\r\n//   // get all contries\r\n//   const countryUrl = \"http://127.0.0.1:8000/api/companies/country\";\r\n//   const countryRes = await axios.get(countryUrl)\r\n\r\n//    // get all contact_type\r\n//    const contactTypeUrl = \"http://127.0.0.1:8000/api/companies/contact_type\";\r\n//    const contactType = await axios.get(contactTypeUrl)\r\n\r\n//     // get all contactResult\r\n//   const contactResultUrl = \"http://127.0.0.1:8000/api/companies/contact_result\";\r\n//   const contactResult = await axios.get(contactResultUrl)\r\n\r\n//   return [res.data.results || [],  countryRes.data.results || [],contactType.data.results || [] ,contactResult.data.results || [] ]\r\n\r\n//   } catch (error) {\r\n//     alert(error)\r\n//     return [ [],   [], [] , [] ]\r\n//   }\r\n// }\r\n"],"names":["Table","React","Home","_useState","useState","_useState2","_slicedToArray","companies","setCompaies","_useState3","_useState4","countries","setCountries","_useState5","_useState6","contactTypes","setContactTypes","_useState7","_useState8","contactResults","setContactResults","_useState9","_useState10","isLoading","setIsLoading","jwt","useSelector","state","user","access","useEffect","axios","headers","Authorization","concat","then","res","data","results","catch","err","console","log","_jsx","Suspense","fallback","className","children","src","tableData","setTableData","states","contactType","contactResult"],"sourceRoot":""}