{"version":3,"file":"static/js/114.d7397521.chunk.js","mappings":"2RAUMA,EAAQC,EAAAA,MAAW,kBAAM,oDAA+B,IAE/C,SAASC,IACtB,IAAAC,GAAiCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAtCI,EAASF,EAAA,GAAEG,EAAWH,EAAA,GAC7BI,GAAkCL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAvCE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,GAAwCT,EAAAA,EAAAA,UAAS,IAAGU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAA7CE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GACpCG,GAA4Cb,EAAAA,EAAAA,UAAS,IAAGc,GAAAZ,EAAAA,EAAAA,GAAAW,EAAA,GAAjDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GAExCG,GAAkCjB,EAAAA,EAAAA,WAAS,GAAKkB,GAAAhB,EAAAA,EAAAA,GAAAe,EAAA,GAA9BE,GAAFD,EAAA,GAAcA,EAAA,IAGxBE,GAAWC,EAAAA,EAAAA,MAEXC,GAAMC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,KAAKC,MAAM,IAG9CC,EAASC,aAAaC,QAAQ,OA+DpC,OA7DAC,EAAAA,EAAAA,YAAU,WAIR,IAAMC,EAAMH,aAAaC,QAAQ,OAIrB,OAARE,GAAeX,EAAS,iBAG5B,IAAMY,EAAWD,EAAM,iBAEvBE,EAAAA,EAAAA,IACOD,EAAU,CAAEE,QAAS,CAAEC,cAAc,OAADC,OAASd,MACjDe,MAAK,SAACC,GACLlC,EAAYkC,EAAIC,KAAKC,SAAW,GAClC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAIF,IAAMG,EAAiBd,EAAM,+BAE7BE,EAAAA,EAAAA,IACOY,EAAgB,CAAEX,QAAS,CAAEC,cAAc,OAADC,OAASd,MACvDe,MAAK,SAACC,GACLtB,EAAkBsB,EAAIC,KAAKC,SAAW,GACxC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAEF,IAAMI,EAAkBf,EAAM,wBAE9BE,EAAAA,EAAAA,IACOa,EAAiB,CAAEZ,QAAS,CAAEC,cAAc,OAADC,OAASd,MACxDe,MAAK,SAACC,GACL9B,EAAa8B,EAAIC,KAAKC,SAAW,GACnC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAEF,IAAMK,EAAkBhB,EAAM,6BAE9BE,EAAAA,EAAAA,IACOc,EAAiB,CAAEb,QAAS,CAAEC,cAAc,OAADC,OAASd,MACxDe,MAAK,SAACC,GACL1B,EAAgB0B,EAAIC,KAAKC,SAAW,GACtC,IACCC,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAGFvB,GAAa,EACf,GAAG,KAGD6B,EAAAA,EAAAA,KAACC,EAAAA,SAAQ,CACPC,UACEF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,qEAAoEC,UACjFJ,EAAAA,EAAAA,KAAA,OACEG,UAAU,mDACVE,IAAK1B,MAGVyB,UAEDJ,EAAAA,EAAAA,KAACpD,EAAK,CACJ0D,UAAWnD,EACXoD,aAAcnD,EACdoD,OAAQjD,EACRkD,YAAa9C,EACb+C,cAAe3C,KAIvB,C","sources":["pages/home.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link, Navigate, useLoaderData, useNavigate } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useState } from \"react\";\r\nimport useFetchAxios from \"../hoocs/useFetchAxios\";\r\n\r\n// importing lazy components\r\nimport { Suspense, lazy } from \"react\";\r\n\r\nconst Table = React.lazy(() => import(\"../components/myTable\"));\r\n\r\nexport default function Home() {\r\n  const [companies, setCompaies] = useState([]);\r\n  const [countries, setCountries] = useState([]);\r\n  const [contactTypes, setContactTypes] = useState([]);\r\n  const [contactResults, setContactResults] = useState([]);\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // navigate\r\n  const navigate = useNavigate();\r\n  //redux\r\n  const jwt = useSelector((state) => state.user.access); // it wiil be a problem if jwt access is expired\r\n\r\n //set image url\r\n  const imgUrl = localStorage.getItem(\"img\"); // logo\r\n\r\n  useEffect(() => {\r\n    // get all companies\r\n\r\n    // set data base url\r\n    const url = localStorage.getItem(\"url\"); // logo\r\n\r\n\r\n    // if url is null navigate to auth\r\n    if (url === null) {navigate(\"/auth/company\")}\r\n  \r\n\r\n    const endpoint = url + \"api/companies/\";\r\n\r\n    axios\r\n      .get(endpoint, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setCompaies(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    // get all companies\r\n\r\n    const resultEndpoint = url + \"api/companies/contact_result\";\r\n\r\n    axios\r\n      .get(resultEndpoint, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setContactResults(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    const countryEndpoint = url + \"api/companies/country\";\r\n\r\n    axios\r\n      .get(countryEndpoint, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setCountries(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    const contactEndpoint = url + \"api/companies/contact_type\";\r\n\r\n    axios\r\n      .get(contactEndpoint, { headers: { Authorization: `JWT ${jwt}` } })\r\n      .then((res) => {\r\n        setContactTypes(res.data.results || []);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    // loading\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\" w-[100%] h-[700px] flex flex-column justify-center  items-center \">\r\n          <img\r\n            className=\"  w-[50%] m-auto  p-20 shadow-sm shadow-blue-100\"\r\n            src={imgUrl}\r\n          />\r\n        </div>\r\n      }\r\n    >\r\n      <Table\r\n        tableData={companies}\r\n        setTableData={setCompaies}\r\n        states={countries}\r\n        contactType={contactTypes}\r\n        contactResult={contactResults}\r\n      />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\n// export const companyLouder = async ()=>{\r\n\r\n//   // get all companies\r\n//   try {\r\n//     const url = \"http://127.0.0.1:8000/api/companies/\";\r\n//     const res = await axios.get(url, {headers: {Authorization: `JWT ${jwt}`}}) // it wiil be a problem if jwt access is expired\r\n\r\n//   // get all contries\r\n//   const countryUrl = \"http://127.0.0.1:8000/api/companies/country\";\r\n//   const countryRes = await axios.get(countryUrl)\r\n\r\n//    // get all contact_type\r\n//    const contactTypeUrl = \"http://127.0.0.1:8000/api/companies/contact_type\";\r\n//    const contactType = await axios.get(contactTypeUrl)\r\n\r\n//     // get all contactResult\r\n//   const contactResultUrl = \"http://127.0.0.1:8000/api/companies/contact_result\";\r\n//   const contactResult = await axios.get(contactResultUrl)\r\n\r\n//   return [res.data.results || [],  countryRes.data.results || [],contactType.data.results || [] ,contactResult.data.results || [] ]\r\n\r\n//   } catch (error) {\r\n//     alert(error)\r\n//     return [ [],   [], [] , [] ]\r\n//   }\r\n// }\r\n"],"names":["Table","React","Home","_useState","useState","_useState2","_slicedToArray","companies","setCompaies","_useState3","_useState4","countries","setCountries","_useState5","_useState6","contactTypes","setContactTypes","_useState7","_useState8","contactResults","setContactResults","_useState9","_useState10","setIsLoading","navigate","useNavigate","jwt","useSelector","state","user","access","imgUrl","localStorage","getItem","useEffect","url","endpoint","axios","headers","Authorization","concat","then","res","data","results","catch","err","console","log","resultEndpoint","countryEndpoint","contactEndpoint","_jsx","Suspense","fallback","className","children","src","tableData","setTableData","states","contactType","contactResult"],"sourceRoot":""}